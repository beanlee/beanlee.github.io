
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="BeanLee Blog">
    <title>中后台前端搭建经验总结-技术细节篇（一） - BeanLee Blog</title>
    <meta name="author" content="Bean Lee">
    
    
        <link rel="icon" href="https://beanlee.github.io/favicon.png">
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Bean Lee","sameAs":["https://github.com/beanlee","https://twitter.com/MrBean_Lee","https://www.linkedin.com/in/beanlee-75309387","https://instagram.com/beanlee2020"],"image":"https://beanlee.github.io/favicon.png"},"articleBody":"\n\n本篇是总结一个旧项目，项目在 2019 年 Q3 开发并上线运营，经历两个月迭代后目前已交接给其他团队维护，整理个人草稿箱发现这边还没有完成的总结，补充一些内容更新至此，内容应该是顺着回想起袭击，后面再补充。\n\n关键词：中后台系统、从零到壹\n\n项目背景交易指挥中心是中台基础基础组件化向智能基础组件化升级的战略项目，同时驱动中台核心业务中心的平台化搭建。一期建成优惠监控、库存、订单、商品四大指挥中心系统以及门户，实现中台系统的从零到一的系统建设。\n对于我们的前端团队意义在于，积累面向 B 端中后台系统开发经验，沉淀中后组件，配合中后台系统可视化构建平台完成。\n技术选型\nReact + TypeScript + MobX\n构建工具 jdwcli（webpack + koa dev server）\nUI（LEGAO React + 部分 Ant Design）\n图表框架 HightCharts\n\n部分方案设计菜单路由由于中后台系统，页面功能及数据信息需要一定的访问权限，除了在数据返回之前控制以外，前端展示的权限菜单控制就很重要。\n权限控制与菜单动态菜单及路由中后台系统其页面功能及数据信息比较敏感，在面向 C 端用户的基础上，只要控制当前基于数据安全方面的考虑，页面的访问控制非常重要。首先，在服务端接口数据保证权限校验的前提下，用户在前台访问页面所看到的菜单也需要进行权限控制。\n出于上面的考虑，针对当前系统的菜单设计时可以前端架构采用动态菜单设计。用户有权限访问到的菜单通过权限接口返回，再由前端渲染。（这里没有将权限限制逻辑放在前台有两点考虑：1、HTTP 接口容易被抓去伪造，非权限菜单容易暴露；2、当前系统是基于 ERP 等方式单点登录，集成了 ERP 系统的角色控制，前台和后台没有必要做重复的权限判断逻辑；）\n笔者曾在一家专注线上协同办公（OA）的软件公司，负责过一段组织模型与菜单角色模块，经历过基于 RBAC 模式的控制权限改造，从数据库设计、服务开发以及到前台实现。\n前端这里要做的就是，需要同时支持两套方案\n\n第一类：前端固定路由信息（针对不敏感菜单）\n第二类：通过数据接口按照权限获取相关路由\n\n上面提到的两种方案的实现，遵循统一的一套数据结构就可以实现。\n实现上面的设计，依赖于 jdwcli 创建的项目模板中页面工厂 PageFactory这个类，即采用工厂模式将菜单数据缓存，通过 React.lazy 实现动态引用，这样即达到分包的特点减小初始包的大小，又可以实现菜单控制。\n12345678910111213141516171819202122232425262728293031323334[  &#123;    \"key\": \"home\",    \"page\": \"home\",    \"path\": \"/home\",    \"show\": true,    \"title\": \"首页\"  &#125;,  &#123;    \"key\": \"xxxyyy\",    \"page\": \"xxxyyy\",    \"path\": \"/xxxyyy\",    \"show\": true,    \"title\": \"XXXYYY一级菜单\",    \"children\": [      &#123;        \"key\": \"yyy\",        \"page\": \"yyy\",        \"path\": \"/yyy\",        \"show\": true,        \"title\": \"yyy系统介绍\"      &#125;,      &#123;        \"iframe\": true,        \"iframesrc\": \"//xxx.yyy.com\",        \"key\": \"xxxIndex\",        \"page\": \"xxxIndex\",        \"path\": \"/xxxIndex\",        \"show\": true,        \"title\": \"xxx首页\"      &#125;    ]  &#125;]\n迁移旧系统和页面零售中台经过多年的沉淀，内部有很多的功能系统存在，在开发初期就基本确认无法通过段时间内一一重新开发实现，迁移旧页面这个功能也需要被考虑在内。\n目前比较合适的方案有两种：\n\n采用 IFRAME 内嵌；\n通过菜单或链接跳转离开；\n\n那么为了满足这两种方案，在前面设计菜单的同时，在数据结构中就要增加针对内嵌和跳转离开的标示，考虑前端路由当前页面是一个 IFRAME 内嵌系统，还是一个需要点击跳转离开的菜单。\n完成这点以后，要做的就是开发一个统一接受 IFRAME 链接的 Component 即可。\n1234567891011121314151617@withRouterexport default class IFrameCont extends React.Component&lt;IFrameContProps&gt; &#123;  render() &#123;    const &#123; iframeSrc &#125; = this.props;    if (!iframeSrc) return null;    return (      &lt;&gt;        &lt;iframe          title=&#123;iframeSrc&#125;          src=&#123;iframeSrc&#125;          width=&quot;100%&quot;          height=&quot;100%&quot;        &gt;&lt;/iframe&gt;      &lt;/&gt;    );  &#125;&#125;\nBUT，上面的实现，我们似乎忽略了一个问题，我们只考虑到了用户点击菜单路由跳转过来的页面，由于我们使用的是 HASH 路由，并没有考虑如果用户在当前页面刷新或通过页面 URL 直接访问指定路由时，当前 Component 无法拿到 src 的 props 的。这里我采取的办法是：同时将 Store 中菜单信息监听到当前组件中，与当前页面 URL 中的 pathname 进行一次匹配。\n123456789101112131415161718192021222324252627282930313233343536373839404142434445+ @inject((stores: GlobalStores) =&gt; (&#123;+  menu: stores[PAGE_STORE].menu+ &#125;))+ @observer@withRouterexport default class IFrameCont extends React.Component&lt;IFrameContProps&gt; &#123;  render() &#123;    let iframeSrc = \"\";+    if (!this.props.location.state) &#123;+      try &#123;+        iframeSrc = Array.from(this.getAllMenus(this.props.menu)).filter(menuItem =&gt; &#123;+          return menuItem.path === this.props.location.pathname;+        &#125;)[0].iframesrc;+      &#125; catch (error) &#123;+        console.error(\"error iframe src\");+        return null;+      &#125;+    &#125; else &#123;+      const &#123; menu &#125; = this.props.location.state;+      iframeSrc = menu.iframesrc;+    &#125;    if (!iframeSrc) &#123;      return null;    &#125;    return (      &lt;&gt;        &lt;iframe title=&#123;`$&#123;Math.random()&#125;`&#125; src=&#123;iframeSrc&#125; width=\"100%\" height=\"100%\"&gt;&lt;/iframe&gt;      &lt;/&gt;    );  &#125;+  private getAllMenus(pagedata: PageStore.Domain.PageType[], map?: Set&lt;PageType&gt;) &#123;+   return pagedata.reduce(+      (prev, next) =&gt; &#123;+        prev.add(next);+        if (next.children &amp;&amp; next.children.length &gt; 0) &#123;+          this.getAllMenus(next.children, prev);+        &#125;+        return prev;+      &#125;,+      map ? map : new Set&lt;PageType&gt;()+    );+  &#125;&#125;\n数据可视化中后台系统中，许多数据需要具有更丰富的展现形式，那么图与表的结合就是比较好的方案。\n本项目中图采用 HighCharts 作为图库，考虑有两个原因：\n\n有以往使用的经验，项目紧急时期可以快速实现，并且公司内拥有采购 HighCharts 的授权（Wiki 中翻到了历史采购清单文件）；\n对比同类型 BizCharts、ECharts、Chartjs、D3.js 等其它图表库，HighCharts 具备官方文档丰富且详细、DEMO 实例丰富、图表种类多，页面渲染依靠 SVG 效率较高、拥有官方支持 React 版本（highcharts-react-official）、可快速产品原型中的图例、行业老大位置等特点；\n\n\n这是一篇迟来的总结文章，其实如果时间允许，可以选择的方案还有很多，今天还刚刚看到 Airbnb 团队公布开源了一个新的可视化组件库。https://airbnb.io/visx/\n\n内部实现的有 双轴图、堆叠图、百分比堆叠图、饼图、坐标系图（散点图的延伸）实现细节以及部分问题总结详见另外一篇撰写中总结。\n表单实现对于中后台，健壮表单功能应该是必不可少的一环，由于当前项目都是比较简单的表单，目前的项目经验，大致分为两种：\n\n查询，带有复杂条件的关联查询，后面跟随查询结果\n传统 Form 提交，用户填充数据提交\n\n这里提一个问题：当你看到 Form 表单会联想到什么？下面是目前我能想到的内容：\n\n输入框校验问题（正则、服务端校验、输入转义防止注入攻击）\n当前表单的状态保存，以及重置（关于 Store 的控制）\n交互体验（输入和可选框之间的联动，提交重置按钮出现的位置等等）\n表单的某一条或某些条目需要作为动态内容可以添加、删除和修改\n\n那么这些表单能否有通过可视化拖拽，自动生成吗？答案是肯定的，同组其他的同事就在调研实现这个问题，找机会深入讨论一下。\n性能优化点级联组件性能优惠指挥中心系统中价格力系数查询页面，品牌级联，级联菜单由于存在一个 3K 左右个的数据由后端一次性返回，需要前端在前台把数据组装成树接口分级，再传递到级联组件中，这对于浏览器中内存计算耗时，以及组件初始化大量数据的性能都造成很大影响，在开发初期没有发现，Mock 数据只有几十个。\n解决方案：就要和后端商量将查询接口调整为分级查询，逐级进行查询，避免一次数量过大。这里还可以在继续深入优化的点，就是当前二级或三级级联数据被 load 过一次以后，前端缓存在当前页面内，鼠标划回父级数据时直接拿缓存数据。（当然，缓存永远是一把双刃剑，要考虑缓存什么时间失效，什么时间生效就要具体问题具体分析。）\n缓存又是一个经常被讨论到的问题，各种缓存策略，网络上可以找到很多优秀详细的文章，这里简单介绍一下本项目使用的一些缓存策略。\n\n将工具、UI 库等比如 React、React-DOM、MobX，HighCharts 等，按需在其页面内静态引入，并且提前上线到 CDN ，将固定引用链接利用客户端缓存，不在更新；\n页面 Nginx 响应头设置缓存时间；\n配合后端检查，固定类变化特别小的数据请求，可以适当增大缓存时间，同时缓存到客户端本地；\n\n开发环境与生产环境隔离环境的隔离，应该是工程化中比较简单且常见的问题，在从零搭建系统过程中，也不免存在这个问题，我自己的解决方案是，利用头尾系统（内部系统）建立两套文件，分别对应预发测试和正式环境。预发测试环境需要经常更新，缓存时间设置也非常短，且请求的也是预发测试接口，这在上线前需要及时更换。\n这点在项目构建打包时，可以根据设置环境来进行操作。\n比如：利用 Babel 编译中移除项目内冗余的 console.log，线上仅保留 error 或者其他，那就可以在项目中的 .babelrc 进行如下配置：\n123456789101112131415&#123;  \"env\": &#123;    \"dev\": &#123;      \"plugins\": [        [          \"transform-remove-console\",          &#123; \"exclude\": [\"log\", \"debug\", \"error\", \"warn\"] &#125;        ]      ]    &#125;,    \"prod\": &#123;      \"plugins\": [[\"transform-remove-console\", &#123; \"exclude\": [\"error\"] &#125;]]    &#125;  &#125;&#125;\n这样在 npm script 中配置 BABEL_ENV=dev xxxx 依次类推可以根据需要配置，对打包进行区分。\n注意： babelrc 中的 dev 是为了举例说明，配置成 development 和 production 当然最好，因为默认会读 NODE_ENV 环境变量的配置。\n多人协作这里不提太多，总结了一个方便的项目模板，利用 VSCode 或者 WebStorm 自身来实现保存时自动按照 Prettier + ESLint -fix 来格式化和自动修复部分代码，同时还可以结合 husky 在提交之前再进行一次格式化，可以一定程度地约束项目代码。\nGit 提交 message ，可以利用 commitizen + cz-conventional-changelog 来呈现更统一的提交信息。\n小结中后台系统具有很强的业务属性，只要找到其中规律，可以抽象沉淀出一些通用的业务组件，这样一来可以为可视化搭建中后台系统积累物料，二来对于仅有的统一风格的 UI 组件库来的更有意义。\n","dateCreated":"2020-10-20T20:18:13+08:00","dateModified":"2020-10-20T20:21:05+08:00","datePublished":"2020-10-20T20:18:13+08:00","description":"\n\n本篇是总结一个旧项目，项目在 2019 年 Q3 开发并上线运营，经历两个月迭代后目前已交接给其他团队维护，整理个人草稿箱发现这边还没有完成的总结，补充一些内容更新至此，内容应该是顺着回想起袭击，后面再补充。\n\n关键词：中后台系统、从零到壹","headline":"中后台前端搭建经验总结-技术细节篇（一）","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://beanlee.github.io/posts/think-about-fe-of-backsystem/"},"publisher":{"@type":"Organization","name":"Bean Lee","sameAs":["https://github.com/beanlee","https://twitter.com/MrBean_Lee","https://www.linkedin.com/in/beanlee-75309387","https://instagram.com/beanlee2020"],"image":"https://beanlee.github.io/favicon.png","logo":{"@type":"ImageObject","url":"https://beanlee.github.io/favicon.png"}},"url":"https://beanlee.github.io/posts/think-about-fe-of-backsystem/","keywords":"总结"}</script>
    <meta name="description" content="本篇是总结一个旧项目，项目在 2019 年 Q3 开发并上线运营，经历两个月迭代后目前已交接给其他团队维护，整理个人草稿箱发现这边还没有完成的总结，补充一些内容更新至此，内容应该是顺着回想起袭击，后面再补充。  关键词：中后台系统、从零到壹">
<meta name="keywords" content="总结">
<meta property="og:type" content="blog">
<meta property="og:title" content="中后台前端搭建经验总结-技术细节篇（一）">
<meta property="og:url" content="https://beanlee.github.io/posts/think-about-fe-of-backsystem/index.html">
<meta property="og:site_name" content="BeanLee Blog">
<meta property="og:description" content="本篇是总结一个旧项目，项目在 2019 年 Q3 开发并上线运营，经历两个月迭代后目前已交接给其他团队维护，整理个人草稿箱发现这边还没有完成的总结，补充一些内容更新至此，内容应该是顺着回想起袭击，后面再补充。  关键词：中后台系统、从零到壹">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2020-10-20T12:21:05.710Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="中后台前端搭建经验总结-技术细节篇（一）">
<meta name="twitter:description" content="本篇是总结一个旧项目，项目在 2019 年 Q3 开发并上线运营，经历两个月迭代后目前已交接给其他团队维护，整理个人草稿箱发现这边还没有完成的总结，补充一些内容更新至此，内容应该是顺着回想起袭击，后面再补充。  关键词：中后台系统、从零到壹">
<meta name="twitter:creator" content="@https:&#x2F;&#x2F;twitter.com&#x2F;MrBean_Lee">
    
    
        
    
    
        <meta property="og:image" content="https://www.gravatar.com/avatar/3fe40c6cac2cee1d563a87ada4d02cc5?s=640"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-hmujtphswtnkmxr9nrbolulu5rdtlf5r16obkh0cadm91o9xxruanxhctll8.min.css">
    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-46079069-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-46079069-1');
    </script>


    
    <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?db9bb97e9e15133d0f061a19cb4f6093";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>

</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/ ">BeanLee Blog</a>
    </div>
    
        
            <a class="header-right-icon open-algolia-search" href="#search">
        
        
            <i class="search fa-lg"></i>
        
        </a>
    
</header>

            <!-- Define author's picture -->


    

<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about">
                    <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/3fe40c6cac2cee1d563a87ada4d02cc5?s=110" alt="作者的图片">
                </a>
                <h4 class="sidebar-profile-name">Bean Lee</h4>
                
                    <h5 class="sidebar-profile-bio"><p>author.bio</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/ " title="首页">
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-tags" title="标签">
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-archives" title="归档">
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link open-algolia-search" href="#search" title="搜索">
                    
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">搜索</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/links" title="链接">
                    
                        <i class="sidebar-button-icon fa fa-link" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">链接</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/about" title="关于我">
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">关于我</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/beanlib" title="实验室">
                    
                        <i class="sidebar-button-icon fa fa-flask" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">实验室</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/beanlee" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://twitter.com/MrBean_Lee" target="_blank" rel="noopener" title="Twitter">
                    
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://www.linkedin.com/in/beanlee-75309387" target="_blank" rel="noopener" title="LinkedIn">
                    
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://instagram.com/beanlee2020" target="_blank" rel="noopener" title="Instagram">
                    
                        <i class="sidebar-button-icon fab fa-instagram" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Instagram</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/atom.xml" title="RSS">
                    
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            中后台前端搭建经验总结-技术细节篇（一）
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2020-10-20T20:18:13+08:00">
	
		    10月 20, 2020
    	
    </time>
    
    <span class="post-count">&nbsp;&nbsp;2,971 words, about  11 min read </span>
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <!-- ## 中后台前端搭建经验总结-技术细节篇（一）-->
<blockquote>
<p>本篇是总结一个旧项目，项目在 2019 年 Q3 开发并上线运营，经历两个月迭代后目前已交接给其他团队维护，整理个人草稿箱发现这边还没有完成的总结，补充一些内容更新至此，内容应该是顺着回想起袭击，后面再补充。</p>
</blockquote>
<p>关键词：中后台系统、从零到壹</p>
<a id="more"></a>
<h3 id="项目背景"><a href="#项目背景" class="headerlink" title="项目背景"></a>项目背景</h3><p>交易指挥中心是中台基础基础组件化向智能基础组件化升级的战略项目，同时驱动中台核心业务中心的平台化搭建。一期建成优惠监控、库存、订单、商品四大指挥中心系统以及门户，实现中台系统的从零到一的系统建设。</p>
<p>对于我们的前端团队意义在于，积累面向 B 端中后台系统开发经验，沉淀中后组件，配合中后台系统可视化构建平台完成。</p>
<h3 id="技术选型"><a href="#技术选型" class="headerlink" title="技术选型"></a>技术选型</h3><ul>
<li>React + TypeScript + MobX</li>
<li>构建工具 jdwcli（webpack + koa dev server）</li>
<li>UI（LEGAO React + 部分 Ant Design）</li>
<li>图表框架 HightCharts</li>
</ul>
<h3 id="部分方案设计"><a href="#部分方案设计" class="headerlink" title="部分方案设计"></a>部分方案设计</h3><h4 id="菜单路由"><a href="#菜单路由" class="headerlink" title="菜单路由"></a>菜单路由</h4><p>由于中后台系统，页面功能及数据信息需要一定的访问权限，除了在数据返回之前控制以外，前端展示的权限菜单控制就很重要。</p>
<h4 id="权限控制与菜单"><a href="#权限控制与菜单" class="headerlink" title="权限控制与菜单"></a>权限控制与菜单</h4><h5 id="动态菜单及路由"><a href="#动态菜单及路由" class="headerlink" title="动态菜单及路由"></a>动态菜单及路由</h5><p>中后台系统其页面功能及数据信息比较敏感，在面向 C 端用户的基础上，只要控制当前基于数据安全方面的考虑，页面的访问控制非常重要。首先，在服务端接口数据保证权限校验的前提下，用户在前台访问页面所看到的菜单也需要进行权限控制。</p>
<p>出于上面的考虑，针对当前系统的菜单设计时可以前端架构采用<strong>动态菜单设计</strong>。用户有权限访问到的菜单通过权限接口返回，再由前端渲染。（这里没有将权限限制逻辑放在前台有两点考虑：1、HTTP 接口容易被抓去伪造，非权限菜单容易暴露；2、当前系统是基于 ERP 等方式单点登录，集成了 ERP 系统的角色控制，前台和后台没有必要做重复的权限判断逻辑；）</p>
<p>笔者曾在一家专注线上协同办公（OA）的软件公司，负责过一段组织模型与菜单角色模块，经历过基于 <strong>RBAC</strong> 模式的控制权限改造，从数据库设计、服务开发以及到前台实现。</p>
<p>前端这里要做的就是，需要同时支持两套方案</p>
<ul>
<li>第一类：前端固定路由信息（针对不敏感菜单）</li>
<li>第二类：通过数据接口按照权限获取相关路由</li>
</ul>
<p>上面提到的两种方案的实现，遵循<strong>统一的一套数据结构</strong>就可以实现。</p>
<p>实现上面的设计，依赖于 jdwcli 创建的项目模板中<strong>页面工厂 PageFactory</strong>这个类，即采用工厂模式将菜单数据缓存，通过 React.lazy 实现动态引用，这样即达到分包的特点减小初始包的大小，又可以实现菜单控制。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"key"</span>: <span class="string">"home"</span>,</span><br><span class="line">    <span class="attr">"page"</span>: <span class="string">"home"</span>,</span><br><span class="line">    <span class="attr">"path"</span>: <span class="string">"/home"</span>,</span><br><span class="line">    <span class="attr">"show"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"title"</span>: <span class="string">"首页"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"key"</span>: <span class="string">"xxxyyy"</span>,</span><br><span class="line">    <span class="attr">"page"</span>: <span class="string">"xxxyyy"</span>,</span><br><span class="line">    <span class="attr">"path"</span>: <span class="string">"/xxxyyy"</span>,</span><br><span class="line">    <span class="attr">"show"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"title"</span>: <span class="string">"XXXYYY一级菜单"</span>,</span><br><span class="line">    <span class="attr">"children"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"key"</span>: <span class="string">"yyy"</span>,</span><br><span class="line">        <span class="attr">"page"</span>: <span class="string">"yyy"</span>,</span><br><span class="line">        <span class="attr">"path"</span>: <span class="string">"/yyy"</span>,</span><br><span class="line">        <span class="attr">"show"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"yyy系统介绍"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"iframe"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"iframesrc"</span>: <span class="string">"//xxx.yyy.com"</span>,</span><br><span class="line">        <span class="attr">"key"</span>: <span class="string">"xxxIndex"</span>,</span><br><span class="line">        <span class="attr">"page"</span>: <span class="string">"xxxIndex"</span>,</span><br><span class="line">        <span class="attr">"path"</span>: <span class="string">"/xxxIndex"</span>,</span><br><span class="line">        <span class="attr">"show"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"title"</span>: <span class="string">"xxx首页"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h5 id="迁移旧系统和页面"><a href="#迁移旧系统和页面" class="headerlink" title="迁移旧系统和页面"></a>迁移旧系统和页面</h5><p>零售中台经过多年的沉淀，内部有很多的功能系统存在，在开发初期就基本确认无法通过段时间内一一重新开发实现，迁移旧页面这个功能也需要被考虑在内。</p>
<p>目前比较合适的方案有两种：</p>
<ol>
<li>采用 IFRAME 内嵌；</li>
<li>通过菜单或链接跳转离开；</li>
</ol>
<p>那么为了满足这两种方案，在前面设计菜单的同时，在数据结构中就要增加针对内嵌和跳转离开的标示，考虑前端路由当前页面是一个 IFRAME 内嵌系统，还是一个需要点击跳转离开的菜单。</p>
<p>完成这点以后，要做的就是开发一个统一接受 IFRAME 链接的 Component 即可。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">@withRouter</span><br><span class="line">export default class IFrameCont extends React.Component&lt;IFrameContProps&gt; &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    const &#123; iframeSrc &#125; = this.props;</span><br><span class="line">    if (!iframeSrc) return null;</span><br><span class="line">    return (</span><br><span class="line">      &lt;&gt;</span><br><span class="line">        &lt;iframe</span><br><span class="line">          title=&#123;iframeSrc&#125;</span><br><span class="line">          src=&#123;iframeSrc&#125;</span><br><span class="line">          width=&quot;100%&quot;</span><br><span class="line">          height=&quot;100%&quot;</span><br><span class="line">        &gt;&lt;/iframe&gt;</span><br><span class="line">      &lt;/&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>BUT，上面的实现，我们似乎忽略了一个问题，我们只考虑到了用户点击菜单路由跳转过来的页面，由于我们使用的是 HASH 路由，并没有考虑如果用户在当前页面刷新或通过页面 URL 直接访问指定路由时，当前 Component 无法拿到 src 的 props 的。这里我采取的办法是：同时将 Store 中菜单信息监听到当前组件中，与当前页面 URL 中的 pathname 进行一次匹配。</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ @inject((stores: GlobalStores) =&gt; (&#123;</span></span><br><span class="line"><span class="addition">+  menu: stores[PAGE_STORE].menu</span></span><br><span class="line"><span class="addition">+ &#125;))</span></span><br><span class="line"><span class="addition">+ @observer</span></span><br><span class="line">@withRouter</span><br><span class="line">export default class IFrameCont extends React.Component&lt;IFrameContProps&gt; &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    let iframeSrc = "";</span><br><span class="line"><span class="addition">+    if (!this.props.location.state) &#123;</span></span><br><span class="line"><span class="addition">+      try &#123;</span></span><br><span class="line"><span class="addition">+        iframeSrc = Array.from(this.getAllMenus(this.props.menu)).filter(menuItem =&gt; &#123;</span></span><br><span class="line"><span class="addition">+          return menuItem.path === this.props.location.pathname;</span></span><br><span class="line"><span class="addition">+        &#125;)[0].iframesrc;</span></span><br><span class="line"><span class="addition">+      &#125; catch (error) &#123;</span></span><br><span class="line"><span class="addition">+        console.error("error iframe src");</span></span><br><span class="line"><span class="addition">+        return null;</span></span><br><span class="line"><span class="addition">+      &#125;</span></span><br><span class="line"><span class="addition">+    &#125; else &#123;</span></span><br><span class="line"><span class="addition">+      const &#123; menu &#125; = this.props.location.state;</span></span><br><span class="line"><span class="addition">+      iframeSrc = menu.iframesrc;</span></span><br><span class="line"><span class="addition">+    &#125;</span></span><br><span class="line"></span><br><span class="line">    if (!iframeSrc) &#123;</span><br><span class="line">      return null;</span><br><span class="line">    &#125;</span><br><span class="line">    return (</span><br><span class="line">      &lt;&gt;</span><br><span class="line">        &lt;iframe title=&#123;`$&#123;Math.random()&#125;`&#125; src=&#123;iframeSrc&#125; width="100%" height="100%"&gt;&lt;/iframe&gt;</span><br><span class="line">      &lt;/&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="addition">+  private getAllMenus(pagedata: PageStore.Domain.PageType[], map?: Set&lt;PageType&gt;) &#123;</span></span><br><span class="line"><span class="addition">+   return pagedata.reduce(</span></span><br><span class="line"><span class="addition">+      (prev, next) =&gt; &#123;</span></span><br><span class="line"><span class="addition">+        prev.add(next);</span></span><br><span class="line"><span class="addition">+        if (next.children &amp;&amp; next.children.length &gt; 0) &#123;</span></span><br><span class="line"><span class="addition">+          this.getAllMenus(next.children, prev);</span></span><br><span class="line"><span class="addition">+        &#125;</span></span><br><span class="line"><span class="addition">+        return prev;</span></span><br><span class="line"><span class="addition">+      &#125;,</span></span><br><span class="line"><span class="addition">+      map ? map : new Set&lt;PageType&gt;()</span></span><br><span class="line"><span class="addition">+    );</span></span><br><span class="line"><span class="addition">+  &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="数据可视化"><a href="#数据可视化" class="headerlink" title="数据可视化"></a>数据可视化</h4><p>中后台系统中，许多数据需要具有更丰富的展现形式，那么<strong>图与表</strong>的结合就是比较好的方案。</p>
<p>本项目中图采用 <strong>HighCharts</strong> 作为图库，考虑有两个原因：</p>
<ol>
<li>有以往使用的经验，项目紧急时期可以快速实现，并且公司内拥有采购 HighCharts 的授权（Wiki 中翻到了历史采购清单文件）；</li>
<li>对比同类型 BizCharts、ECharts、Chartjs、D3.js 等其它图表库，HighCharts 具备官方文档丰富且详细、DEMO 实例丰富、图表种类多，页面渲染依靠 SVG 效率较高、拥有官方支持 React 版本（highcharts-react-official）、可快速产品原型中的图例、行业老大位置等特点；</li>
</ol>
<blockquote>
<p>这是一篇迟来的总结文章，其实如果时间允许，可以选择的方案还有很多，今天还刚刚看到 Airbnb 团队公布开源了一个新的可视化组件库。<a href="https://airbnb.io/visx/" target="_blank" rel="noopener">https://airbnb.io/visx/</a></p>
</blockquote>
<p>内部实现的有 双轴图、堆叠图、百分比堆叠图、饼图、坐标系图（散点图的延伸）实现细节以及部分问题总结详见另外一篇撰写中总结。</p>
<h4 id="表单实现"><a href="#表单实现" class="headerlink" title="表单实现"></a>表单实现</h4><p>对于中后台，健壮表单功能应该是必不可少的一环，由于当前项目都是比较简单的表单，目前的项目经验，大致分为两种：</p>
<ul>
<li>查询，带有复杂条件的关联查询，后面跟随查询结果</li>
<li>传统 Form 提交，用户填充数据提交</li>
</ul>
<p>这里提一个问题：当你看到 Form 表单会联想到什么？下面是目前我能想到的内容：</p>
<ul>
<li>输入框校验问题（正则、服务端校验、输入转义防止注入攻击）</li>
<li>当前表单的状态保存，以及重置（关于 Store 的控制）</li>
<li>交互体验（输入和可选框之间的联动，提交重置按钮出现的位置等等）</li>
<li>表单的某一条或某些条目需要作为动态内容可以添加、删除和修改</li>
</ul>
<p>那么这些表单能否有通过可视化拖拽，自动生成吗？答案是肯定的，同组其他的同事就在调研实现这个问题，找机会深入讨论一下。</p>
<h3 id="性能优化点"><a href="#性能优化点" class="headerlink" title="性能优化点"></a>性能优化点</h3><h4 id="级联组件性能"><a href="#级联组件性能" class="headerlink" title="级联组件性能"></a>级联组件性能</h4><p>优惠指挥中心系统中价格力系数查询页面，品牌级联，级联菜单由于存在一个 3K 左右个的数据由后端一次性返回，需要前端在前台把数据组装成树接口分级，再传递到级联组件中，这对于浏览器中内存计算耗时，以及组件初始化大量数据的性能都造成很大影响，在开发初期没有发现，Mock 数据只有几十个。</p>
<p>解决方案：就要和后端商量将查询接口调整为分级查询，逐级进行查询，避免一次数量过大。这里还可以在继续深入优化的点，就是当前二级或三级级联数据被 load 过一次以后，前端缓存在当前页面内，鼠标划回父级数据时直接拿缓存数据。<strong>（当然，缓存永远是一把双刃剑，要考虑缓存什么时间失效，什么时间生效就要具体问题具体分析。）</strong></p>
<h3 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h3><p>又是一个经常被讨论到的问题，各种缓存策略，网络上可以找到很多优秀详细的文章，这里简单介绍一下本项目使用的一些缓存策略。</p>
<ol>
<li>将工具、UI 库等比如 React、React-DOM、MobX，HighCharts 等，按需在其页面内静态引入，并且提前上线到 CDN ，将固定引用链接利用客户端缓存，不在更新；</li>
<li>页面 Nginx 响应头设置缓存时间；</li>
<li>配合后端检查，固定类变化特别小的数据请求，可以适当增大缓存时间，同时缓存到客户端本地；</li>
</ol>
<h3 id="开发环境与生产环境隔离"><a href="#开发环境与生产环境隔离" class="headerlink" title="开发环境与生产环境隔离"></a>开发环境与生产环境隔离</h3><p>环境的隔离，应该是工程化中比较简单且常见的问题，在从零搭建系统过程中，也不免存在这个问题，我自己的解决方案是，利用头尾系统（内部系统）建立两套文件，分别对应预发测试和正式环境。预发测试环境需要经常更新，缓存时间设置也非常短，且请求的也是预发测试接口，这在上线前需要及时更换。</p>
<p>这点在项目构建打包时，可以根据设置环境来进行操作。</p>
<p>比如：利用 Babel 编译中移除项目内冗余的 console.log，线上仅保留 error 或者其他，那就可以在项目中的 <code>.babelrc</code> 进行如下配置：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"env"</span>: &#123;</span><br><span class="line">    <span class="attr">"dev"</span>: &#123;</span><br><span class="line">      <span class="attr">"plugins"</span>: [</span><br><span class="line">        [</span><br><span class="line">          <span class="string">"transform-remove-console"</span>,</span><br><span class="line">          &#123; <span class="attr">"exclude"</span>: [<span class="string">"log"</span>, <span class="string">"debug"</span>, <span class="string">"error"</span>, <span class="string">"warn"</span>] &#125;</span><br><span class="line">        ]</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"prod"</span>: &#123;</span><br><span class="line">      <span class="attr">"plugins"</span>: [[<span class="string">"transform-remove-console"</span>, &#123; <span class="attr">"exclude"</span>: [<span class="string">"error"</span>] &#125;]]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样在 npm script 中配置 <code>BABEL_ENV=dev xxxx</code> 依次类推可以根据需要配置，对打包进行区分。</p>
<p><strong>注意：</strong> babelrc 中的 dev 是为了举例说明，配置成 development 和 production 当然最好，因为默认会读 NODE_ENV 环境变量的配置。</p>
<h3 id="多人协作"><a href="#多人协作" class="headerlink" title="多人协作"></a>多人协作</h3><p>这里不提太多，总结了一个方便的项目模板，利用 VSCode 或者 WebStorm 自身来实现保存时自动按照 <code>Prettier + ESLint -fix</code> 来格式化和自动修复部分代码，同时还可以结合 husky 在提交之前再进行一次格式化，可以一定程度地约束项目代码。</p>
<p>Git 提交 message ，可以利用 commitizen + cz-conventional-changelog 来呈现更统一的提交信息。</p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>中后台系统具有很强的业务属性，只要找到其中规律，可以抽象沉淀出一些通用的业务组件，这样一来可以为可视化搭建中后台系统积累物料，二来对于仅有的统一风格的 UI 组件库来的更有意义。</p>

            

        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div style="text-align: center;">
  <p>如果你觉得这篇文章对你有所帮助，可以微信扫码请作者吃个甜甜圈哦~</p>
  <img src="https://beanlee.github.io/img/wechat_donate.JPG" width="300" height="300" alt>
</div>
        
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">标签</span><br>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/总结/">总结</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/posts/page-with-gesture/" data-tooltip="单品页手势实现记录" aria-label="下一篇: 单品页手势实现记录">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://beanlee.github.io/posts/think-about-fe-of-backsystem/" title="分享到 Facebook">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://beanlee.github.io/posts/think-about-fe-of-backsystem/" title="分享到 Twitter">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a class="post-action-btn btn btn--default" href="#disqus_thread">
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 Bean Lee. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="2">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left" aria-hidden="true"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                </a>
            </li>
            <li class="post-action">
                
                    
                    <a class="post-action-btn btn btn--default tooltip--top" href="/posts/page-with-gesture/" data-tooltip="单品页手势实现记录" aria-label="下一篇: 单品页手势实现记录">
                
                    <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                    <i class="fa fa-angle-right" aria-hidden="true"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://beanlee.github.io/posts/think-about-fe-of-backsystem/" title="分享到 Facebook">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://beanlee.github.io/posts/think-about-fe-of-backsystem/" title="分享到 Twitter">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a class="post-action-btn btn btn--default" href="#disqus_thread">
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="2">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://beanlee.github.io/posts/think-about-fe-of-backsystem/">
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>分享到 Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https://beanlee.github.io/posts/think-about-fe-of-backsystem/">
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>分享到 Twitter</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="https://www.gravatar.com/avatar/3fe40c6cac2cee1d563a87ada4d02cc5?s=110" alt="作者的图片">
        
            <h4 id="about-card-name">Bean Lee</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>author.job</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br>
                Beijing
            </div>
        
    </div>
</div>

        
            <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-times"></i></span>
            <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://img11.360buyimg.com/imagetools/jfs/t29587/1/1553336624/17034/4000fd99/5ce4bf63N116f7972.png">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search" class="form-control input--large search-input" placeholder="Search ">
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">没有找到文章</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://beanlee.github.io/posts/First-Blog/">
                            <h3 class="media-heading">开篇</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年11月28日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://beanlee.github.io/posts/Finished-the-book/">
                            <h3 class="media-heading">英雄再见</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年12月4日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><h1 id="《獵命師傳奇》最终章完结"><a href="#《獵命師傳奇》最终章完结" class="headerlink" title="《獵命師傳奇》最终章完结"></a>《獵命師傳奇》最终章完结</h1><p>断断续续地在地铁上读完了这本九把刀的长篇《獵命師傳奇》，说来初识九把刀还是在看过《那些年，我们一起追的女孩儿》这部电影来的，当时只是觉得这些年台湾电影成长的很快，这位有趣自大的导演第一部电影长篇就拍的如此热血，导演本人也一定非常有趣，带着疑问和好奇，我开始在网上查阅九把刀。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://beanlee.github.io/posts/Eassy-Programmer/">
                            <h3 class="media-heading">程序员都是理想主义者</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2013年12月5日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://beanlee.github.io/posts/The-Summary-of-At/">
                            <h3 class="media-heading">微博等SNS@功能探索技术验证总结</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2014年1月10日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>公司阶段技术预言项，推特微博等@人员功能，断断续续3-4天时间，做了一些总结在Blog中和大家分享</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://beanlee.github.io/posts/Read-The-Book-Of-Zhihu/">
                            <h3 class="media-heading">书摘随笔</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2014年3月20日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>读《创业时，我们在知乎聊什么》书摘随笔一</p>
<blockquote>
<p>最小化可行产品 汪华说，你一开始的所有计划其实只是对用户和市场的假定而已，小团队的钱和资源也都有限，必须先快速地找个办法验证方向。 所以产品的第一个版本的目的，是验证用户需求和反馈，而不是做一个完美无缺、功能丰富的版本。第一版应该集中于开发出产品的核心功能和核心需求，也就是那个用户。</p>
</blockquote></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://beanlee.github.io/posts/Misfit-Shine/">
                            <h3 class="media-heading">有设计感的数码产品才能打动人心</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2014年4月12日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>夏日来袭，笔者对比了几款运动手环，最终入手Misfit Shine带来开箱图文和简单对比分享</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://beanlee.github.io/posts/Java-Collection-Review/">
                            <h3 class="media-heading">Java基础集合类复习</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2014年6月6日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Java基础集合类的问题简单整理</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://beanlee.github.io/posts/Study-Swift-1/">
                            <h3 class="media-heading">Swift Study 1</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2014年6月8日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>Swift is an important chance to find coding passion back to me. So Do Not Lose It! Come on!</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://beanlee.github.io/posts/Mac-Tool-Series-1/">
                            <h3 class="media-heading">Mac Tool</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2014年6月19日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>推荐的两款软件，它们有助于我提高效率，因此来完成这篇推介文。<br>Dash 一款用来集成快速查阅文档；CheatSheet 一款用来提示快捷键。</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="https://beanlee.github.io/posts/OSC-Party/">
                            <h3 class="media-heading">OSC源创回年终盛典</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    2014年11月26日
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"><p>开源中国2014年终盛典大会参会笔记</p></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium" data-message-zero="没有找到文章" data-message-one="找到 1 篇文章" data-message-other="找到 {n} 篇文章">
                找到 33 篇文章
            </p>
        </div>
    </div>
</div>

        
        
<div id="cover" style="background-image:url('https://img10.360buyimg.com/uba/jfs/t19666/213/522537036/248594/9d238021/5a936b81Nf7ab67ea.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-snykejswjcxqfzqhk8erauq9xu9tds7bleedq61lkpgsla0zkuddqzjkbdhm.min.js"></script>
<!--SCRIPTS END-->

    
        <script>
             var disqus_config = function () {
                 this.page.url = 'https://beanlee.github.io/posts/think-about-fe-of-backsystem/';
                 
                    this.page.identifier = 'posts/think-about-fe-of-backsystem/';
                 
             };
            (function() {
                var d = document, s = d.createElement('script');
                var disqus_shortname = 'beanleeblog';
                s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

                s.setAttribute('data-timestamp', +new Date());
                (d.head || d.body).appendChild(s);
            })();
        </script>
    



<!-- Hotjar Tracking Code for https://beanlee.github.io -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:1333288,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>

    </body>
</html>
